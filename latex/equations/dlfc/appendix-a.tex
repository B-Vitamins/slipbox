\documentclass{article}

% Document Layout and Fonts
\usepackage[margin=0.9in]{geometry}    % Page margins
\usepackage{fontspec}                  % For custom fonts (LuaLaTeX feature)
\usepackage{tgpagella}
\usepackage{mathpazo}
\setmainfont{EB Garamond}              % Main font (EB Garamond)
\usepackage{microtype}                 % Improves text appearance
\usepackage{titlesec}                  % Customize section title fonts

% Right-align section headings
\titleformat{\section}
  {\normalfont\large\scshape\raggedright}  % Right-align and small caps
  {}{0em}{}[]

% Right-align subsection headings and add a line below
\titleformat{\subsection}
  {\normalfont\normalsize\raggedleft}     % Right-align subsections
  {}{0em}{\titlerule[0.5pt]}              % Horizontal line below

% Right-align and italicize subsubsections
\titleformat{\subsubsection}
  {\normalfont\normalsize\itshape\raggedleft} % Right-align and italicize subsubsections
  {}{0em}{}[]

% Math and Science Packages
\usepackage{amsmath, amsfonts, amssymb, mathtools, amsthm, dsfont}

% Math commands and operators
\newcommand{\minus}{\scalebox{0.8}{\(-\)}}
\newcommand{\plus}{\scalebox{0.6}{\(+\)}}
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\tr}{Tr}
\newcommand{\diff}{\mathop{}\!\mathrm{d}}    % Differential d

% Definitions, theorems, corollaries, and friends
\usepackage[english]{babel}
\usepackage[hidelinks]{hyperref}
\newtheorem{axiom}{Axiom}
\newtheorem{postulate}{Postulate}
\newtheorem{definition}{Definition}
\newtheorem{lemma}{Lemma}
\newtheorem{theorem}{Theorem}
\newtheorem{corollary}{Corollary}
\newtheorem*{remark}{Remark}

\title{\LARGE\scshape\MakeUppercase{Appendix A. Linear Algebra}}
\author{\textit{Bishop and Bishop}}
\date{}

\begin{document}

\maketitle

\section{Matrix Identities}

\begin{align*}
(\mathbf{A B})^{\mathrm{T}} = \mathbf{B}^{\mathrm{T}} \mathbf{A}^{\mathrm{T}} 
\tag{A.1}
\end{align*}

\begin{align*}
\mathbf{A} \mathbf{A}^{-1} = \mathbf{A}^{-1} \mathbf{A} = \mathbf{I}
\tag{A.2}
\end{align*}

\begin{align*}
(\mathbf{A B})^{-1} = \mathbf{B}^{-1} \mathbf{A}^{-1}
\tag{A.3}
\end{align*}

\begin{align*}
\left(\mathbf{A}^{\mathrm{T}}\right)^{-1} = \left(\mathbf{A}^{-1}\right)^{\mathrm{T}}
\tag{A.4}
\end{align*}

\begin{align*}
\left(\mathbf{P}^{-1} + \mathbf{B}^{\mathrm{T}} \mathbf{R}^{-1} \mathbf{B}\right)^{-1} \mathbf{B}^{\mathrm{T}} \mathbf{R}^{-1} = \mathbf{P} \mathbf{B}^{\mathrm{T}}\left(\mathbf{B} \mathbf{P} \mathbf{B}^{\mathrm{T}} + \mathbf{R}\right)^{-1}
\tag{A.5}
\end{align*}

\begin{align*}
(\mathbf{I} + \mathbf{A B})^{-1} \mathbf{A} = \mathbf{A}(\mathbf{I} + \mathbf{B} \mathbf{A})^{-1}
\tag{A.6}
\end{align*}

\begin{align*}
\left(\mathbf{A} + \mathbf{B D}^{-1} \mathbf{C}\right)^{-1} = \mathbf{A}^{-1} - \mathbf{A}^{-1} \mathbf{B}\left(\mathbf{D} + \mathbf{C A}^{-1} \mathbf{B}\right)^{-1} \mathbf{C A}^{-1}
\tag{A.7}
\end{align*}

\section{Traces and Determinants}

\begin{align*}
\operatorname{Tr}(\mathbf{A B}) = \operatorname{Tr}(\mathbf{B A})
\tag{A.8}
\end{align*}

\begin{align*}
\operatorname{Tr}(\mathbf{A B C}) = \operatorname{Tr}(\mathbf{C A B}) = \operatorname{Tr}(\mathbf{B C A})
\tag{A.9}
\end{align*}

\begin{align*}
|\mathbf{A}| = \sum( \pm 1) A_{1 i_{1}} A_{2 i_{2}} \cdots A_{N i_{N}}
\tag{A.10}
\end{align*}

\begin{align*}
|\mathbf{A}| = \left|\begin{array}{ll}
a_{11} & a_{12} \\
a_{21} & a_{22}
\end{array}\right| = a_{11} a_{22} - a_{12} a_{21}
\tag{A.11}
\end{align*}

\begin{align*}
|\mathbf{A B}| = |\mathbf{A}| |\mathbf{B}|
\tag{A.12}
\end{align*}

\begin{align*}
\left|\mathbf{A}^{-1}\right| = \frac{1}{|\mathbf{A}|}
\tag{A.13}
\end{align*}

\begin{align*}
\left|\mathbf{I}_{N} + \mathbf{A B}^{\mathrm{T}}\right| = \left|\mathbf{I}_{M} + \mathbf{A}^{\mathrm{T}} \mathbf{B}\right|
\tag{A.14}
\end{align*}

\begin{align*}
\left|\mathbf{I}_{N} + \mathbf{a b}^{\mathrm{T}}\right| = 1 + \mathbf{a}^{\mathrm{T}} \mathbf{b}
\tag{A.15}
\end{align*}

\section{Matrix Derivatives}

\begin{align*}
\left(\frac{\partial \mathbf{a}}{\partial x}\right)_{i} = \frac{\partial a_{i}}{\partial x}
\tag{A.16}
\end{align*}

\begin{align*}
\left(\frac{\partial x}{\partial \mathbf{a}}\right)_{i} = \frac{\partial x}{\partial a_{i}}
\tag{A.17}
\end{align*}

\begin{align*}
\left(\frac{\partial \mathbf{a}}{\partial \mathbf{b}}\right)_{i j} = \frac{\partial a_{i}}{\partial b_{j}}
\tag{A.18}
\end{align*}

\begin{align*}
\frac{\partial}{\partial \mathbf{x}}\left(\mathbf{x}^{\mathrm{T}} \mathbf{a}\right) = \frac{\partial}{\partial \mathbf{x}}\left(\mathbf{a}^{\mathrm{T}} \mathbf{x}\right) = \mathbf{a}
\tag{A.19}
\end{align*}

\begin{align*}
\frac{\partial}{\partial x}(\mathbf{A B}) = \frac{\partial \mathbf{A}}{\partial x} \mathbf{B} + \mathbf{A} \frac{\partial \mathbf{B}}{\partial x}
\tag{A.20}
\end{align*}

\begin{align*}
\frac{\partial}{\partial x}\left(\mathbf{A}^{-1}\right) = -\mathbf{A}^{-1} \frac{\partial \mathbf{A}}{\partial x} \mathbf{A}^{-1}
\tag{A.21}
\end{align*}

\begin{align*}
\frac{\partial}{\partial x} \ln |\mathbf{A}| = \operatorname{Tr}\left(\mathbf{A}^{-1} \frac{\partial \mathbf{A}}{\partial x}\right)
\tag{A.22}
\end{align*}

\begin{align*}
\frac{\partial}{\partial A_{i j}} \operatorname{Tr}(\mathbf{A B}) = B_{j i}
\tag{A.23}
\end{align*}

\begin{align*}
\frac{\partial}{\partial \mathbf{A}} \operatorname{Tr}(\mathbf{A B}) = \mathbf{B}^{\mathrm{T}}
\tag{A.24}
\end{align*}

\begin{align*}
\frac{\partial}{\partial \mathbf{A}} \operatorname{Tr}\left(\mathbf{A}^{\mathrm{T}} \mathbf{B}\right) & = \mathbf{B}
\tag{A.25}
\end{align*}

\begin{align*}
\frac{\partial}{\partial \mathbf{A}} \operatorname{Tr}(\mathbf{A}) & = \mathbf{I}
\tag{A.26}
\end{align*}

\begin{align*}
\frac{\partial}{\partial \mathbf{A}} \operatorname{Tr}\left(\mathbf{A B} \mathbf{A}^{\mathrm{T}}\right) = \mathbf{A}\left(\mathbf{B} + \mathbf{B}^{\mathrm{T}}\right)
\tag{A.27}
\end{align*}

\begin{align*}
\frac{\partial}{\partial \mathbf{A}} \ln |\mathbf{A}| = \left(\mathbf{A}^{-1}\right)^{\mathrm{T}}
\tag{A.28}
\end{align*}

\section{Eigenvectors}

\begin{align*}
\mathbf{A} \mathbf{u}_{i} = \lambda_{i} \mathbf{u}_{i}
\tag{A.29}
\end{align*}

\begin{align*}
\left|\mathbf{A} - \lambda_{i} \mathbf{I}\right| = 0
\tag{A.30}
\end{align*}

\begin{align*}
\left(\mathbf{u}_{i}^{\star}\right)^{\mathrm{T}} \mathbf{A} \mathbf{u}_{i} = \lambda_{i}\left(\mathbf{u}_{i}^{\star}\right)^{\mathrm{T}} \mathbf{u}_{i}
\tag{A.31}
\end{align*}

\begin{align*}
\mathbf{u}_{i}^{\mathrm{T}} \mathbf{A} \mathbf{u}_{i}^{\star} = \lambda_{i}^{\star} \mathbf{u}_{i}^{\mathrm{T}} \mathbf{u}_{i}^{\star}
\tag{A.32}
\end{align*}

\begin{align*}
\mathbf{u}_{i}^{\mathrm{T}} \mathbf{u}_{j} = I_{i j}
\tag{A.33}
\end{align*}

\begin{align*}
\mathbf{U}^{\mathrm{T}} \mathbf{U} = \mathbf{I}
\tag{A.37}
\end{align*}

\begin{align*}
\mathbf{A U} = \mathbf{U} \boldsymbol{\Lambda}
\tag{A.38}
\end{align*}

\begin{align*}
\widetilde{\mathbf{x}} = \mathbf{U x}
\tag{A.39}
\end{align*}

\begin{align*}
\widetilde{\mathbf{x}}^{\mathrm{T}} \widetilde{\mathbf{x}} = \mathbf{x}^{\mathrm{T}} \mathbf{U}^{\mathrm{T}} \mathbf{U} \mathbf{x} = \mathbf{x}^{\mathrm{T}} \mathbf{x}
\tag{A.40}
\end{align*}

\begin{align*}
\widetilde{\mathbf{x}}^{\mathrm{T}} \widetilde{\mathbf{y}} = \mathbf{x}^{\mathrm{T}} \mathbf{U}^{\mathrm{T}} \mathbf{U} \mathbf{y} = \mathbf{x}^{\mathrm{T}} \mathbf{y}
\tag{A.41}
\end{align*}

\begin{align*}
\mathbf{U}^{\mathrm{T}} \mathbf{A} \mathbf{U} = \boldsymbol{\Lambda}
\tag{A.42}
\end{align*}

\begin{align*}
\mathbf{A} = \mathbf{U} \boldsymbol{\Lambda} \mathbf{U}^{\mathrm{T}}
\tag{A.43}
\end{align*}

\begin{align*}
\mathbf{A}^{-1} = \mathbf{U} \boldsymbol{\Lambda}^{-1} \mathbf{U}^{\mathrm{T}}
\tag{A.44}
\end{align*}

\begin{align*}
\mathbf{A} = \sum_{i=1}^{M} \lambda_{i} \mathbf{u}_{i} \mathbf{u}_{i}^{\mathrm{T}}
\tag{A.45}
\end{align*}

\begin{align*}
\mathbf{A}^{-1} = \sum_{i=1}^{M} \frac{1}{\lambda_{i}} \mathbf{u}_{i} \mathbf{u}_{i}^{\mathrm{T}}
\tag{A.46}
\end{align*}

\begin{align*}
|\mathbf{A}| = \prod_{i=1}^{M} \lambda_{i}
\tag{A.47}
\end{align*}

\begin{align*}
\operatorname{Tr}(\mathbf{A}) = \sum_{i=1}^{M} \lambda_{i}
\tag{A.48}
\end{align*}

\begin{align*}
\left(\begin{array}{ll}
1 & 2 \\
3 & 4
\end{array}\right)
\tag{A.49}
\end{align*}

\begin{align*}
\mathrm{CN} = \left(\frac{\lambda_{\max }}{\lambda_{\min }}\right)^{1 / 2}
\tag{A.50}
\end{align*}

\end{document}
